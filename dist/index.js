!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tela=e():t.Tela=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"Canvas",(function(){return m}));var r={getImageCanvas:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");return n.fillStyle="rgba(0, 0, 0, 0)",n.globalCompositeOperation="source-over",n.fillRect(0,0,e.width,e.height),n.drawImage(t,0,0),e},getDataFromImage:function(t){return canvas=r.getImageCanvas(t),canvas.getContext("2d").getImageData(0,0,t.width,t.height)},loadImage:function(t){var e=new Image;return e.src=t,e.isReady=!1,e.onload=function(){return e.isReady=!0},e},generateImageReadyPredicate:function(t){return function(){return t.isReady}}},a=r;function i(t,e){var n=[];return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n}function o(t){var e=[];return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function u(t,e){var n=[];return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n}function s(t,e){return t[0]*e[0]+t[1]*e[1]}function h(t){return s(t,t)}function c(t){return Math.sqrt(s(t,t))}function f(t,e){var n=[];return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n}function g(t,e){var n=[];return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n}function l(t,e,n){var r=n[1]/t[1];return[r,(-t[0]*r+n[0])/e]}function d(t,e,n){var r=n[0]/t[0];return[r,(-t[1]*r+n[1])/e]}var v,p=function(t){this.canvas=t,this.ctx=t.getContext("2d"),this.image=this.ctx.getImageData(0,0,t.width,t.height),this.imageData=this.image.data};p.prototype.getSize=function(){return[this.canvas.height,this.canvas.width]},p.prototype.paintImage=function(){this.ctx.putImageData(this.image,0,0)},p.prototype.getCanvas=function(){return this.canvas},p.prototype.clearImage=function(t){this.useCanvasCtx((function(e){var n=e.getSize();e.ctx.fillStyle="rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")",e.ctx.globalCompositeOperation="source-over",e.ctx.fillRect(0,0,n[1],n[0])}),!0)},p.prototype.useCanvasCtx=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||this.ctx.putImageData(this.image,0,0),t(this),this.image=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.imageData=this.image.data},p.prototype.getImageIndex=function(t){return 4*(this.canvas.width*t[0]+t[1])},p.prototype.getPxl=function(t){var e=this.getImageIndex(t);return[this.imageData[e],this.imageData[e+1],this.imageData[e+2],this.imageData[e+3]]},p.prototype.drawPxl=function(t,e){var n=this.getImageIndex(t);this.imageData[n]=e[0],this.imageData[n+1]=e[1],this.imageData[n+2]=e[2],this.imageData[n+3]=e[3]},p.prototype.drawLine=function(t,e,n){n.points=[t,e];var r=[];r.push(t),r.push(e);for(var a=[],i=[],o=0;o<r.length;o++){0<=(g=r[o])[0]&&g[0]<this.canvas.height&&0<=g[1]&&g[1]<this.canvas.width?a.push(g):i.push(g)}if(2!=a.length){var h=[],c=[e[0]-t[0],e[1]-t[1]];h.push(l(c,-(this.canvas.height-1),[-t[0],-t[1]])),h.push(d(c,-(this.canvas.width-1),[this.canvas.height-1-t[0],-t[1]])),h.push(l(c,this.canvas.height-1,[this.canvas.height-1-t[0],this.canvas.width-1-t[1]])),h.push(d(c,this.canvas.width-1,[-t[0],this.canvas.width-1-t[1]]));var f=[];for(o=0;o<h.length;o++){var g;0<=(g=h[o])[0]&&g[0]<=1&&0<=g[1]&&g[1]<=1&&f.push(g)}if(0!=f.length)if(a.length>0){var v=[t[0]+f[0][0]*c[0],t[1]+f[0][0]*c[1]];this.drawLineInt(a.pop(),v,n)}else{var p=[t[0]+f[0][0]*c[0],t[1]+f[0][0]*c[1]];for(o=1;o<f.length;o++){if(s(c=u(v=[t[0]+f[o][0]*c[0],t[1]+f[o][0]*c[1]],p),c)>.001)return void this.drawLineInt(p,v,n)}this.drawLineInt(p,p,n)}}else this.drawLineInt(a[0],a[1],n)},p.prototype.drawLineInt=function(t,e,n){t=o(t),e=o(e);var r=[-1,0,1],a=r.length,h=a*a,c=[];c[0]=t[0],c[1]=t[1];var f=u(e,t),g=[];for(g[0]=-f[1],g[1]=f[0],n(c,n.points,this);c[0]!==e[0]||c[1]!==e[1];){for(var l=Number.MAX_VALUE,d=[],v=0;v<h;v++){var p=r[v%a],m=r[Math.floor(v/a)],y=u(i(c,[p,m]),t),x=Math.abs(s(y,g))-s(y,f);l>x&&(l=x,d=[p,m])}n(c=i(c,d),n.points,this)}n(c,n.points,this)},p.prototype.drawPolygon=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.isInsidePolygon,r=[[Number.MAX_VALUE,Number.MAX_VALUE],[Number.MIN_VALUE,Number.MIN_VALUE]],a=0;a<t.length;a++)r[0]=f(t[a],r[0]),r[1]=g(t[a],r[1]);var i=this.getSize(),s=u(i,[1,1]),h=[0,0];r[0]=o(f(s,g(h,r[0]))),r[1]=o(f(s,g(h,r[1])));for(var c=r[0][0];c<r[1][0];c++)for(var l=r[0][1];l<r[1][1];l++){var d=[c,l];n(d,t)&&e(d,t,this)}},p.prototype.drawTriangle=function(t,e,n,r){var a=[t,e,n];this.drawPolygon(a,r,p.isInsideConvex)},p.prototype.drawQuad=function(t,e,n,r,a){this.drawPolygon([t,e,n,r],a)},p.prototype.drawImage=function(t,e){"isReady"in t&&!t.isReady||this.useCanvasCtx((function(n){return n.ctx.drawImage(t,e[1],e[0])}))},p.prototype.drawCircle=function(t,e,n){var r=function(t,e){var n=[];return n[0]=t[0]*e,n[1]=t[1]*e,n}([1,1],e),a=[u(t,r),i(t,r)],s=this.getSize();a[0]=o(f(u(s,[1,1]),g([0,0],a[0]))),a[1]=o(f(u(s,[1,1]),g([0,0],a[1])));for(var h=a[0][0];h<=a[1][0];h++)for(var c=a[0][1];c<=a[1][1];c++){var l=[h,c];this.isInsideCircle(l,t,e)&&n(l,[t,e],this)}},p.prototype.isInsideCircle=function(t,e,n){return h(u(t,e))<=n*n},p.prototype.addEventListener=function(t,e,n){this.canvas.addEventListener(t,e,n)},p.prototype.drawString=function(t,e,n){this.useCanvasCtx((function(r){n(r.ctx),r.ctx.fillText(e,t[1],t[0])}))},p.isInsidePolygon=function(t,e){for(var n=[],r=0,a=e.length,i=0;i<a;i++)n[0]=u(e[(i+1)%a],t),n[1]=u(e[i],t),r+=Math.acos(s(n[0],n[1])/(c(n[0])*c(n[1])));return Math.abs(r-2*Math.PI)<.001},p.isInsideConvex=function(t,e){for(var n=e.length,r=[],a=[],i=0;i<n;i++){r[i]=u(e[(i+1)%n],e[i]);var o=[-r[i][1],r[i][0]],h=u(t,e[i]);a[i]=s(h,o)}var c=r[0][0]*r[1][1]-r[0][1]*r[1][0]>0?1:-1;for(i=0;i<n;i++){if(a[i]*c<0)return!1}return!0},p.simpleShader=function(t){return function(e,n,r){return r.drawPxl(e,t)}},p.colorShader=function(t){return p.interpolateTriangleShader((function(e,n,r,a){for(var i=[0,0,0,0],o=0;o<n.length;o++)i[0]=i[0]+t[o][0]*a[o],i[1]=i[1]+t[o][1]*a[o],i[2]=i[2]+t[o][2]*a[o],i[3]=i[3]+t[o][3]*a[o];r.drawPxl(e,i)}))},p.interpolateQuadShader=function(t){return function(e,n,r){var a=[n[0],n[1],n[2]],i=[n[2],n[3],n[0]],o=p.triangleBaryCoord(e,a);o[0]>0&&o[1]>0&&o[2]>0&&Math.abs(o[0]+o[1]+o[2]-1)<1e-10?t(e,n,r,[o[0],o[1],o[2],0]):(o=p.triangleBaryCoord(e,i),t(e,n,r,[o[2],0,o[0],o[1]]))}},p.interpolateTriangleShader=function(t){return function(e,n,r){alpha=p.triangleBaryCoord(e,n),t(e,n,r,alpha)}},p.interpolateLineShader=function(t){return function(e,n,r){var a=u(n[1],n[0]),i=u(e,n[0]),o=h(a),c=s(i,a);t(e,n,r,0==o?0:c/o)}},p.quadTextureShader=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.bilinearInterpolation,r=null,s=function(s,h,c,l){t.isReady&&null!=r||(r=new p(a.getImageCanvas(t)));for(var d=r,v=d.getSize(),m=[0,0],y=0;y<e.length;y++)m[0]=m[0]+e[y][0]*l[y],m[1]=m[1]+e[y][1]*l[y];var x=[(1-m[1])*(v[1]-1),(v[0]-1)*m[0]],I=o(x=g([0,0],f(u([v[0],v[1]],[1,1]),x))),w=[d.getPxl(I),d.getPxl(i(I,[1,0])),d.getPxl(i(I,[1,1])),d.getPxl(i(I,[0,1]))],C=n(w,u(x,I));c.drawPxl(s,C)};return p.interpolateQuadShader(s)},p.triangleCache=(v=[],{constains:function(t){return null!=v[t%3]},get:function(t){return v[t%3]},set:function(t,e){return v[t%3]=e}}),p.triangleHash=function(t){return[t[0][0],t[1][0],t[2][0],t[0][1],t[1][1],t[2][1]].reduce((function(t,e){return 31*t+e}),1)},p.triangleBaryCoord=function(t,e){var n=p.triangleHash(e),r=[t[0]-e[0][0],t[1]-e[0][1]];if(!p.triangleCache.constains(n)){var a=[e[1][0]-e[0][0],e[1][1]-e[0][1]],i=[e[2][0]-e[0][0],e[2][1]-e[0][1]],o=a[0]*i[1]-a[1]*i[0];p.triangleCache.set(n,{triangle:e,u:a.map((function(t){return t/o})),v:i.map((function(t){return t/o})),det:o,hash:n})}var u=p.triangleCache.get(n),s=u.u,h=u.v;if(0==u.det)return[0,0,0];var c=[h[1]*r[0]-h[0]*r[1],s[0]*r[1]-s[1]*r[0]];return[1-c[0]-c[1],c[0],c[1]]},p.bilinearInterpolation=function(t,e){for(var n=[],r=0;r<t.length;r++){var a=t[0][r]+(t[3][r]-t[0][r])*e[1],i=a+(t[1][r]+(t[2][r]-t[1][r])*e[1]-a)*e[0];n.push(i)}return n},p.createCanvas=function(t,e){var n=document.createElement("canvas");return n.setAttribute("width",t[0]),n.setAttribute("height",t[1]),document.getElementById(e).appendChild(n),n};var m=p}])}));
//# sourceMappingURL=index.js.map