{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Animator/main/Animator.js","webpack:///./src/BBox/main/BBox.js","webpack:///./src/Canvas/main/Canvas.js","webpack:///./src/Canvas_old/main/Canvas.js","webpack:///./src/Canvas_old/main/Canvas2D.js","webpack:///./src/Canvas_old/main/ImageIO.js","webpack:///./src/Color/main/Color.js","webpack:///./src/Matrix/main/Matrix.js","webpack:///./src/Utils/main/Utils.js","webpack:///./src/index.js","webpack:///external \"@babel/runtime/helpers/esm/classCallCheck\"","webpack:///external \"@babel/runtime/helpers/esm/createClass\"","webpack:///external \"@babel/runtime/helpers/esm/defineProperty\"","webpack:///external \"@babel/runtime/helpers/esm/getPrototypeOf\"","webpack:///external \"@babel/runtime/helpers/esm/inherits\"","webpack:///external \"@babel/runtime/helpers/esm/possibleConstructorReturn\"","webpack:///external \"@babel/runtime/helpers/esm/slicedToArray\"","webpack:///external \"@babel/runtime/helpers/esm/toConsumableArray\"","webpack:///external \"@babel/runtime/helpers/esm/wrapNativeSuper\""],"names":["Animator","state","next","doWhile","requestAnimeId","requestAnimationFrame","stop","play","cancelAnimationFrame","AnimatorBuilder","_state","_next","_end","end","someAreEmpty","some","x","undefined","Error","BBox","min","max","add","sub","isEmpty","op","Math","center","scale","diagonal","box","EMPTY","newMin","newMax","newDiag","isAllPositive","data","every","vector","actionByTypes","type","action","Matrix","i","length","equals","point","vec","vec2","Canvas","canvas","getCanvas","ctx","getContext","image","getImageData","width","height","imgBuffer","color","fillStyle","red","green","blue","alpha","fillRect","lambda","n","w","floor","y","Color","ofRGBA","j","CanvasException","index","start","shader","_","line","_clipLine","p0","p1","v","reduce","e","abs","k","map","p2","_drawConvexPolygon","putImageData","arrayOfPoints","canvasBox","ZERO","of","boundingBox","forEach","ofPoint","finalBox","inter","toArray","xMin","yMin","xMax","yMax","points","_isInsideConvex","m","vDotN","get","r","dot","orientation","myDot","bbox","pointStack","inStack","outStack","p","collidesWith","push","inPoint","outPoint","_getLineCanvasIntersection","boundary","intersectionSolutions","s","d","solution","_solveLowTriMatrix","_solveUpTriMatrix","validIntersections","t","a","f","v1","v2","v12","f1","f2","av2","CanvasBuilder","document","createElement","_width","_height","_canvas","setAttribute","u","ans","diff","squareNorm","norm","sqrt","solve2by2UpperTriMatrix","h","z","aux","solve2by2LowerTriMatrix","imageData","prototype","getSize","paintImage","clearImage","rgba","useCanvasCtx","size","globalCompositeOperation","isClearImage","getImageIndex","getPxl","drawPxl","rgb","drawLine","x1","x2","stack","drawLineInt","validIntersection","pop","nn","tangent","normal","fmin","Number","MAX_VALUE","minDir","nextX","drawPolygon","array","isInsidePoly","isInsidePolygon","upperBox","MIN_VALUE","clampedSize","zeros","drawTriangle","x3","isInsideConvex","drawQuad","x4","drawImage","img","isReady","drawCircle","corner","isInsideCircle","addEventListener","key","useCapture","drawString","string","contextShader","fillText","theta","acos","PI","simpleShader","element","colorShader","colors","auxShader","poly","interpolateColors","interpolateTriangleShader","interpolateQuadShader","quad","t1","t2","triangleBaryCoord","triangle","interpolateLineShader","vnorm","projection","quadTextureShader","quadTexCoord","interpolation","bilinearInterpolation","imageCache","imageShader","ImageIO","getImageCanvas","imageCanvas","imgSize","interpolateTexCoord","cornerColors","finalColor","triangleCache","hashMap","constains","triangleHash","set","value","hash","det","cache","values","acc","f03","f12","createCanvas","domId","getElementById","appendChild","Canvas2D","cameraSpace","call","Object","create","constructor","integerTransform","xint","yint","inverseTransform","xt","yt","y1","y2","y3","y4","setCamera","camera","canvasAux","contextAux","getDataFromImage","loadImage","src","Image","onload","generateImageReadyPredicate","Uint8Array","random","getIndexFromCoord","getCoordFromIndex","index2Key","key2Index","split","MatrixBuilder","_size","MatrixError","Float64Array","indexer","keys","RowBuilder","rows","dim","cols","indexF","ColBuilder","shape","matrix","l","prod","getCoord","identity","binaryLambda","mRows","mCols","b","real","precision","error","builder","build","addCol","addRow","en","matrixBuilder","colBuilder","e0","e1","e2","perf","performance","now","test","title","canvasFactory","timeInMillis","domTest","testTitle","innerText","getDom","timeDom","body"],"mappings":"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","file":"index.node.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","export default class Animator {\n  constructor(state, next, doWhile) {\n    this.state = state;\n    this.next = next;\n    this.while = doWhile;\n    this.requestAnimeId = null;\n  }\n\n  play() {\n    this.requestAnimeId = requestAnimationFrame(() => {\n      if (!this.while(this.state)) return this.stop();\n      this.state = this.next(this.state);\n      this.play();\n    });\n    return this;\n  }\n\n  stop() {\n    cancelAnimationFrame(this.requestAnimeId);\n    return this;\n  }\n\n  static builder() {\n    return new AnimatorBuilder();\n  }\n}\n\nclass AnimatorBuilder {\n  constructor() {\n    this._state = null;\n    this._next = null;\n    this._end = null;\n  }\n\n  initialState(state) {\n    this._state = state;\n    return this;\n  }\n\n  nextState(next) {\n    this._next = next;\n    return this;\n  }\n\n  while(end) {\n    this._end = end;\n    return this;\n  }\n\n  build() {\n    const someAreEmpty = [this._state, this._next, this._end].some(\n      (x) => x === null || x === undefined\n    );\n    if (someAreEmpty) throw new Error(\"Animator properties are missing\");\n    return new Animator(this._state, this._next, this._end);\n  }\n}\n","import Matrix from \"../../Matrix/main/Matrix\";\n\nexport default class BBox {\n  constructor(min, max) {\n    this.isEmpty = min === undefined || max === undefined;\n    if (this.isEmpty) return this;\n    this.min = min.op(max, Math.min);\n    this.max = max.op(min, Math.max);\n    this.center = min.add(max).scale(1 / 2);\n    this.diagonal = max.sub(min);\n  }\n  /**\n   * Union of boxes\n   * @param {*} box\n   */\n  add(box) {\n    if (this === BBox.EMPTY) return box;\n    const { min, max } = this;\n    return new BBox(min.op(box.min, Math.min), max.op(box.max, Math.max));\n  }\n\n  union = this.add;\n\n  /**\n   * Intersection of boxes\n   * @param {*} box\n   */\n  sub(box) {\n    if (this === BBox.EMPTY) return BBox.EMPTY;\n    const { min, max } = this;\n    const newMin = min.op(box.min, Math.max);\n    const newMax = max.op(box.max, Math.min);\n    const newDiag = newMax.sub(newMin);\n    const isAllPositive = newDiag.data.every((x) => x >= 0);\n    return !isAllPositive ? BBox.EMPTY : new BBox(newMin, newMax);\n  }\n\n  inter = this.sub;\n\n  move(vector) {\n    return new BBox(this.min.add(vector), this.max.add(vector));\n  }\n\n  collidesWith(box) {\n    const actionByTypes = [\n      { type: BBox, action: () => !this.sub(box).isEmpty },\n      { type: Matrix, action: () => !this.sub(new BBox(box, box)).isEmpty },\n    ];\n    for (let i = 0; i < actionByTypes.length; i++) {\n      if (box instanceof actionByTypes[i].type) {\n        return actionByTypes[i].action();\n      }\n    }\n  }\n\n  equals(box) {\n    if (!(box instanceof BBox)) return false;\n    if (this == BBox.EMPTY) return true;\n    return this.min.equals(box.min) && this.max.equals(box.max);\n  }\n\n  static ofPoint(...array) {\n    const point = Matrix.vec(...array);\n    return new BBox(point, point);\n  }\n  static EMPTY = new BBox();\n}\n","import Color from \"../../Color/main/Color\";\nimport Matrix from \"../../Matrix/main/Matrix\";\nimport BBox from \"../../BBox/main/BBox\";\nconst { vec2 } = Matrix;\n/*\n Canvas coordinates\n\n 0                  W-1\n +-------------> y\n |\n |\n |       *\n |\n |\n v x\n\n H-1\n */\n\n/*\n\nThe point xe_1 + ye_2 corresponds to a point in the middle of a pxl.\n\nThe canvas data is an array of length colors(C) * width(W) * height(H). Is a 3D-array.\nThe index is a number in [0, C * W * H - 1].\nHaving (x, y, z) where z is the color axis, the formula to index the array is :\n\nf(x, y, z) = C * W * x + C * y + z.\n\nWhere x in [0, H - 1], y in [0, W - 1] and z in [0, C - 1].\n\nNote that f(H - 1, W - 1, C - 1) = C * W * H - 1.\n*/\n\nexport default class Canvas {\n  /**\n   *\n   * @param {*} canvas: DOM element of type canvas\n   */\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.ctx = canvas.getContext(\"2d\");\n    this.image = this.ctx.getImageData(0, 0, canvas.width, canvas.height);\n    // width * height * 4 array of integers\n    this.imgBuffer = this.image.data;\n  }\n\n  getCanvas() {\n    return this.canvas;\n  }\n\n  getDom = this.getCanvas;\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                 side effects function                                *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   * Update color of canvas\n   * @param {*} color: Color\n   */\n  fill(color) {\n    this.ctx.fillStyle = `rgba(${color.red}, ${color.green}, ${color.blue}, ${\n      color.alpha / 255.0\n    })`;\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    this.image = this.ctx.getImageData(\n      0,\n      0,\n      this.canvas.width,\n      this.canvas.height\n    );\n    this.imgBuffer = this.image.data;\n    return this;\n  }\n\n  /**\n   *\n   * @param {*} lambda: (Color,x:number,y:number) => Color\n   */\n  map(lambda = () => {}) {\n    const n = this.imgBuffer.length;\n    const { width: w } = this.canvas;\n    for (let i = 0; i < n; i += 4) {\n      const x = Math.floor(i / (4 * w));\n      const y = Math.floor(i / 4) % w;\n      const color = lambda(\n        Color.ofRGBA(\n          this.imgBuffer[i],\n          this.imgBuffer[i + 1],\n          this.imgBuffer[i + 2],\n          this.imgBuffer[i + 3]\n        ),\n        x,\n        y\n      );\n      this.imgBuffer[i] = color.red;\n      this.imgBuffer[i + 1] = color.green;\n      this.imgBuffer[i + 2] = color.blue;\n      this.imgBuffer[i + 3] = color.alpha;\n    }\n    return this;\n  }\n\n  /**\n   * Return pxl color at (i,j)\n   * @param {*} i: integer \\in [0,H-1]\n   * @param {*} j: integer \\in [0,W-1]\n   * @returns color\n   */\n  getPxl(i, j) {\n    const { width, height } = this.canvas;\n    if ((i < 0 || i >= height) && (j < 0 || j >= width))\n      return new CanvasException(\"pxl out of bounds\");\n    const index = 4 * (i * width + j);\n    return Color.ofRGBA(\n      this.imgBuffer[index],\n      this.imgBuffer[index + 1],\n      this.imgBuffer[index + 2],\n      this.imgBuffer[index + 3]\n    );\n  }\n\n  /**\n   * Set pxl color at (i,j)\n   * @param {*} i: integer \\in [0,H-1]\n   * @param {*} j: integer \\in [0,W-1]\n   * @param {*} color\n   */\n  setPxl(i, j, color) {\n    const { width, height } = this.canvas;\n    if ((i < 0 || i >= height) && (j < 0 || j >= width)) return this;\n    const index = 4 * (i * width + j);\n    this.imgBuffer[index] = color.red;\n    this.imgBuffer[index + 1] = color.green;\n    this.imgBuffer[index + 2] = color.blue;\n    this.imgBuffer[index + 3] = color.alpha;\n    return this;\n  }\n\n  /**\n   *\n   * @param {*} start: 2-Array\n   * @param {*} end: 2-Array\n   * @param {}\n   */\n  drawLine(start, end, shader = (x, y) => Color.ofRGBA(0, 0, 0)) {\n    const { width, _ } = this.canvas;\n    const line = this._clipLine(start, end);\n    const [p0, p1] = line;\n    const v = p1.sub(p0);\n    const n = v.reduce((e, x) => e + Math.abs(x));\n    for (let k = 0; k < n; k++) {\n      const x = p0.add(v.scale(k / n)).map(Math.floor);\n      const [i, j] = x.data;\n      const index = 4 * (i * width + j);\n      const color = shader(i, j);\n      this.imgBuffer[index] = color.red;\n      this.imgBuffer[index + 1] = color.green;\n      this.imgBuffer[index + 2] = color.blue;\n      this.imgBuffer[index + 3] = color.alpha;\n    }\n    return this;\n  }\n\n  drawTriangle(p0, p1, p2, shader = (x, y) => Color.ofRGBA(0, 0, 0)) {\n    return this._drawConvexPolygon([p0, p1, p2], shader);\n  }\n\n  paint() {\n    this.ctx.putImageData(this.image, 0, 0);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Auxiliary functions                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   *\n   * @param {*} arrayOfPoints : Array<2-Array<Number>>\n   * @param {*} shader : (x,y) => color\n   * @returns\n   */\n  _drawConvexPolygon(arrayOfPoints, shader) {\n    const { width, height } = this.canvas;\n    const canvasBox = new BBox(vec2.ZERO, vec2.of(height, width));\n    let boundingBox = BBox.EMPTY;\n    arrayOfPoints.forEach((x) => {\n      boundingBox = boundingBox.add(BBox.ofPoint(...x));\n    });\n    const finalBox = canvasBox.inter(boundingBox);\n    const [xMin, yMin] = finalBox.min.toArray();\n    const [xMax, yMax] = finalBox.max.toArray();\n    const points = arrayOfPoints.map((x) => vec2.of(...x));\n    for (let i = xMin; i < xMax; i++) {\n      for (let j = yMin; j < yMax; j++) {\n        if (this._isInsideConvex(vec2.of(i, j), points)) {\n          const color = shader(i, j);\n          const index = 4 * (i * width + j);\n          this.imgBuffer[index] = color.red;\n          this.imgBuffer[index + 1] = color.green;\n          this.imgBuffer[index + 2] = color.blue;\n          this.imgBuffer[index + 3] = color.alpha;\n        }\n      }\n    }\n    return this;\n  }\n\n  /**\n   *\n   * @param {*} x: vec2\n   * @param {*} points: Array<vec2>\n   * @returns\n   */\n  _isInsideConvex(x, points) {\n    const m = points.length;\n    const v = [];\n    const vDotN = [];\n    for (let i = 0; i < m; i++) {\n      v[i] = points[(i + 1) % m].sub(points[i]);\n      const n = vec2.of(-v[i].get(1), v[i].get(0));\n      const r = x.sub(points[i]);\n      vDotN[i] = r.dot(n).get();\n    }\n    let orientation =\n      v[0].get(0) * v[1].get(1) - v[0].get(1) * v[1].get(0) >= 0 ? 1 : -1;\n    for (let i = 0; i < m; i++) {\n      const myDot = vDotN[i] * orientation;\n      if (myDot < 0) return false;\n    }\n    return true;\n  }\n\n  /**\n   *\n   * @param {*} start: 2-Array<Number>\n   * @param {*} end: 2-Array<Number>\n   * @returns 2-Array<vec2>\n   */\n  _clipLine(start, end) {\n    const { width, height } = this.canvas;\n    const bbox = new BBox(vec2.ZERO, vec2.of(height, width));\n    const pointStack = [start, end].map((x) => vec2.of(...x));\n    const inStack = [];\n    const outStack = [];\n    for (let i = 0; i < pointStack.length; i++) {\n      const p = pointStack[i];\n      if (bbox.collidesWith(p)) {\n        inStack.push(p);\n      } else {\n        outStack.push(p);\n      }\n    }\n    // both points are inside\n    if (inStack.length >= 2) {\n      return inStack;\n    }\n    // one of them is inside\n    if (inStack.length === 1) {\n      const [inPoint] = inStack;\n      const [outPoint] = outStack;\n      return [inPoint, ...this._getLineCanvasIntersection(inPoint, outPoint)];\n    }\n    // both points are outside,need to intersect the boundary\n    return this._getLineCanvasIntersection(...outStack);\n  }\n\n  /**\n   *\n   * @param {*} start: vec2(matrix)\n   * @param {*} end: vec2(matrix)\n   */\n  _getLineCanvasIntersection(start, end) {\n    const { width, height } = this.canvas;\n    const v = end.sub(start);\n    // point and direction of boundary\n    const boundary = [\n      [vec2.ZERO, vec2.of(height, 0)],\n      [vec2.of(height, 0), vec2.of(0, width)],\n      [vec2.of(height, width), vec2.of(-height, 0)],\n      [vec2.of(0, width), vec2.of(0, -width)],\n    ];\n    const intersectionSolutions = [];\n    boundary.forEach(([s, d]) => {\n      if (d.get(0) === 0) {\n        const solution = this._solveLowTriMatrix(v, -d.get(1), s.sub(start));\n        solution !== undefined && intersectionSolutions.push(solution);\n      } else {\n        const solution = this._solveUpTriMatrix(v, -d.get(0), s.sub(start));\n        solution !== undefined && intersectionSolutions.push(solution);\n      }\n    });\n    const validIntersections = [];\n    intersectionSolutions.forEach((solution) => {\n      const [x, y] = [solution.get(0), solution.get(1)];\n      if (0 <= x && x <= 1 && 0 <= y && y <= 1) {\n        validIntersections.push(solution);\n      }\n    });\n    if (validIntersections.length === 0) return [];\n    return validIntersections.map((solution) => {\n      const t = solution.get(0);\n      return start.add(v.scale(t));\n    });\n  }\n\n  /**\n   *\n   * @param {*} v: vec2\n   * @param {*} a: number\n   * @param {*} f: vec2\n   * @returns vec2\n   */\n  _solveLowTriMatrix(v, a, f) {\n    const v1 = v.get(0);\n    const v2 = v.get(1);\n    const v12 = v1 * v2;\n    if (v12 === 0 || v1 === 0) return undefined;\n    const f1 = f.get(0);\n    const f2 = f.get(1);\n    return vec2.of(f1 / v1, (f2 * v1 - a * f1) / v12);\n  }\n\n  /**\n   *\n   * @param {*} v: vec2\n   * @param {*} a: number\n   * @param {*} f: vec2\n   * @returns vec2\n   */\n  _solveUpTriMatrix(v, a, f) {\n    const v1 = v.get(0);\n    const v2 = v.get(1);\n    const av2 = a * v2;\n    if (av2 === 0 || v2 === 0) return undefined;\n    const f1 = f.get(0);\n    const f2 = f.get(1);\n    return vec2.of(f2 / v2, (f1 * v2 - v1 * f2) / av2);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static builder() {\n    return new CanvasBuilder();\n  }\n}\n\nclass CanvasBuilder {\n  _canvas = document.createElement(\"canvas\");\n  _width = 500;\n  _height = 500;\n  constructor() {}\n\n  width(width) {\n    this._width = width;\n    return this;\n  }\n\n  height(height) {\n    this._height = height;\n    return this;\n  }\n\n  build() {\n    this._canvas.setAttribute(\"width\", this._width);\n    this._canvas.setAttribute(\"height\", this._height);\n    return new Canvas(this._canvas);\n  }\n}\n\nexport class CanvasException extends Error {}\n","import ImageIO from \"./ImageIO\";\n/*\n Canvas coordinates\n\n 0                  W-1\n +-------------> y\n |\n |\n |       *\n |\n |\n v x\n\n H-1\n */\n\n/*\n\nThe point xe_1 + ye_2 corresponds to a point in the middle of a pxl.\n\nThe canvas data is an array of length colors(C) * width(W) * height(H). Is a 3D-array.\nThe index is a number in [0, C * W * H - 1].\nHaving (x, y, z) where z is the color axis, the formula to index the array is :\n\nf(x, y, z) = C * W * x + C * y + z.\n\nWhere x in [0, H - 1], y in [0, W - 1] and z in [0, C - 1].\n\nNote that f(H - 1, W - 1, C - 1) = C * W * H - 1.\n*/\n\n// Auxiliary functions\nfunction scale(u, r) {\n  var ans = [];\n  ans[0] = u[0] * r;\n  ans[1] = u[1] * r;\n  return ans;\n}\n\nfunction add(u, v) {\n  var ans = [];\n  ans[0] = u[0] + v[0];\n  ans[1] = u[1] + v[1];\n  return ans;\n}\n\nfunction floor(x) {\n  var ans = [];\n  ans[0] = Math.floor(x[0]);\n  ans[1] = Math.floor(x[1]);\n  return ans;\n}\n\nfunction diff(u, v) {\n  var ans = [];\n  ans[0] = u[0] - v[0];\n  ans[1] = u[1] - v[1];\n  return ans;\n}\n\nfunction dot(u, v) {\n  return u[0] * v[0] + u[1] * v[1];\n}\n\nfunction squareNorm(x) {\n  return dot(x, x);\n}\n\nfunction norm(x) {\n  return Math.sqrt(dot(x, x));\n}\n\nfunction min(u, v) {\n  var ans = [];\n  ans[0] = Math.min(u[0], v[0]);\n  ans[1] = Math.min(u[1], v[1]);\n  return ans;\n}\n\nfunction max(u, v) {\n  var ans = [];\n  ans[0] = Math.max(u[0], v[0]);\n  ans[1] = Math.max(u[1], v[1]);\n  return ans;\n}\n\n/**\n * return solution to : [ u_0 , h] x = z_0\n *\n *                       [ u_1,  0] y = z_1\n */\nfunction solve2by2UpperTriMatrix(u, h, z) {\n  var aux = z[1] / u[1];\n  return [aux, (-u[0] * aux + z[0]) / h];\n}\n/**\n * return solution to : [ u_0 , 0] x = z_0\n *\n *                       [ u_1,  w] y = z_1\n */\nfunction solve2by2LowerTriMatrix(u, w, z) {\n  var aux = z[0] / u[0];\n  return [aux, (-u[1] * aux + z[1]) / w];\n}\n\n// Canvas\nvar Canvas = function (canvas) {\n  this.canvas = canvas;\n  this.ctx = canvas.getContext(\"2d\");\n  this.image = this.ctx.getImageData(0, 0, canvas.width, canvas.height);\n  // width * height * 4 array of integers\n  this.imageData = this.image.data;\n};\n\n/**\n * Returns a two vector with Height as first coordinate and Width as second. [Height, Width].\n */\nCanvas.prototype.getSize = function () {\n  return [this.canvas.height, this.canvas.width];\n};\n\n/**\n *  Draw update image on canvas.\n */\nCanvas.prototype.paintImage = function () {\n  this.ctx.putImageData(this.image, 0, 0);\n};\n\nCanvas.prototype.getCanvas = function () {\n  return this.canvas;\n};\n\n/**\n * Clear Image with @rgba color.\n *\n * @param rgba\n */\nCanvas.prototype.clearImage = function (rgba) {\n  this.useCanvasCtx((canvas) => {\n    var size = canvas.getSize();\n    canvas.ctx.fillStyle =\n      \"rgba(\" + rgba[0] + \",\" + rgba[1] + \",\" + rgba[2] + \",\" + rgba[3] + \")\";\n    canvas.ctx.globalCompositeOperation = \"source-over\";\n    canvas.ctx.fillRect(0, 0, size[1], size[0]);\n  }, true);\n};\n\nCanvas.prototype.useCanvasCtx = function (lambda, isClearImage = false) {\n  if (!isClearImage) {\n    this.ctx.putImageData(this.image, 0, 0);\n  }\n  lambda(this);\n  this.image = this.ctx.getImageData(\n    0,\n    0,\n    this.canvas.width,\n    this.canvas.height\n  );\n  this.imageData = this.image.data;\n};\n\nCanvas.prototype.getImageIndex = function (x) {\n  return 4 * (this.canvas.width * x[0] + x[1]);\n};\n\nCanvas.prototype.getPxl = function (x) {\n  var index = this.getImageIndex(x);\n  return [\n    this.imageData[index],\n    this.imageData[index + 1],\n    this.imageData[index + 2],\n    this.imageData[index + 3],\n  ];\n};\n\nCanvas.prototype.drawPxl = function (x, rgb) {\n  var index = this.getImageIndex(x);\n  this.imageData[index] = rgb[0];\n  this.imageData[index + 1] = rgb[1];\n  this.imageData[index + 2] = rgb[2];\n  this.imageData[index + 3] = rgb[3];\n};\n\n/*\n * x1     :   2-dim array\n * x2     :   2-dim array\n * shader :   is a function that receives a 2-dim array and a line (array with 2 points) and returns a rgba 4-dim array\n */\nCanvas.prototype.drawLine = function (x1, x2, shader) {\n  // add points before clip\n  shader.points = [x1, x2];\n\n  // do clipping\n  var stack = [];\n  stack.push(x1);\n  stack.push(x2);\n  var inStack = [];\n  var outStack = [];\n  for (var i = 0; i < stack.length; i++) {\n    var x = stack[i];\n    if (\n      0 <= x[0] &&\n      x[0] < this.canvas.height &&\n      0 <= x[1] &&\n      x[1] < this.canvas.width\n    ) {\n      inStack.push(x);\n    } else {\n      outStack.push(x);\n    }\n  }\n  // both points are inside canvas\n  if (inStack.length == 2) {\n    this.drawLineInt(inStack[0], inStack[1], shader);\n    return;\n  }\n  //intersecting line with canvas\n  var intersectionSolutions = [];\n  var v = [x2[0] - x1[0], x2[1] - x1[1]];\n  // Let s \\in [0,1]\n  // line intersection with [0, 0]^T + [H - 1, 0]^T s\n  intersectionSolutions.push(\n    solve2by2UpperTriMatrix(v, -(this.canvas.height - 1), [-x1[0], -x1[1]])\n  );\n  // line intersection with [H - 1, 0]^T + [0, W - 1]^T s\n  intersectionSolutions.push(\n    solve2by2LowerTriMatrix(v, -(this.canvas.width - 1), [\n      this.canvas.height - 1 - x1[0],\n      -x1[1],\n    ])\n  );\n  // line intersection with [H - 1, W - 1]^T + [-(H - 1), 0]^T s\n  intersectionSolutions.push(\n    solve2by2UpperTriMatrix(v, this.canvas.height - 1, [\n      this.canvas.height - 1 - x1[0],\n      this.canvas.width - 1 - x1[1],\n    ])\n  );\n  // line intersection with [0, W - 1]^T + [0, -(W - 1)]^T s\n  intersectionSolutions.push(\n    solve2by2LowerTriMatrix(v, this.canvas.width - 1, [\n      -x1[0],\n      this.canvas.width - 1 - x1[1],\n    ])\n  );\n\n  var validIntersection = [];\n  for (var i = 0; i < intersectionSolutions.length; i++) {\n    var x = intersectionSolutions[i];\n    if (0 <= x[0] && x[0] <= 1 && 0 <= x[1] && x[1] <= 1) {\n      validIntersection.push(x);\n    }\n  }\n\n  if (validIntersection.length == 0) return;\n\n  //it can be shown that at this point there is at least one valid intersection.\n  if (inStack.length > 0) {\n    var p = [\n      x1[0] + validIntersection[0][0] * v[0],\n      x1[1] + validIntersection[0][0] * v[1],\n    ];\n    this.drawLineInt(inStack.pop(), p, shader);\n    return;\n  }\n\n  var p0 = [\n    x1[0] + validIntersection[0][0] * v[0],\n    x1[1] + validIntersection[0][0] * v[1],\n  ];\n  for (var i = 1; i < validIntersection.length; i++) {\n    var p = [\n      x1[0] + validIntersection[i][0] * v[0],\n      x1[1] + validIntersection[i][0] * v[1],\n    ];\n    var v = diff(p, p0);\n    if (dot(v, v) > 1e-3) {\n      this.drawLineInt(p0, p, shader);\n      return;\n    }\n  }\n  this.drawLineInt(p0, p0, shader);\n};\n\nCanvas.prototype.drawLineInt = function (x1, x2, shader) {\n  x1 = floor(x1);\n  x2 = floor(x2);\n\n  var index = [-1, 0, 1];\n\n  var n = index.length;\n  var nn = n * n;\n\n  var x = [];\n  x[0] = x1[0];\n  x[1] = x1[1];\n\n  var tangent = diff(x2, x1);\n  var normal = [];\n  normal[0] = -tangent[1];\n  normal[1] = tangent[0];\n\n  shader(x, shader.points, this);\n\n  while (x[0] !== x2[0] || x[1] !== x2[1]) {\n    var fmin = Number.MAX_VALUE;\n    var minDir = [];\n    for (var k = 0; k < nn; k++) {\n      var i = index[k % n];\n      var j = index[Math.floor(k / n)];\n\n      var nextX = add(x, [i, j]);\n\n      var v = diff(nextX, x1);\n      var f = Math.abs(dot(v, normal)) - dot(v, tangent);\n      if (fmin > f) {\n        fmin = f;\n        minDir = [i, j];\n      }\n    }\n\n    x = add(x, minDir);\n    shader(x, shader.points, this);\n  }\n  shader(x, shader.points, this);\n};\n\nCanvas.prototype.drawPolygon = function (\n  array,\n  shader,\n  isInsidePoly = Canvas.isInsidePolygon\n) {\n  let upperBox = [\n    [Number.MAX_VALUE, Number.MAX_VALUE],\n    [Number.MIN_VALUE, Number.MIN_VALUE],\n  ];\n  for (let i = 0; i < array.length; i++) {\n    upperBox[0] = min(array[i], upperBox[0]);\n    upperBox[1] = max(array[i], upperBox[1]);\n  }\n\n  let size = this.getSize();\n  let clampedSize = diff(size, [1, 1]);\n  let zeros = [0, 0];\n  upperBox[0] = floor(min(clampedSize, max(zeros, upperBox[0])));\n  upperBox[1] = floor(min(clampedSize, max(zeros, upperBox[1])));\n\n  for (var i = upperBox[0][0]; i < upperBox[1][0]; i++) {\n    for (var j = upperBox[0][1]; j < upperBox[1][1]; j++) {\n      var x = [i, j];\n      if (isInsidePoly(x, array)) {\n        shader(x, array, this);\n      }\n    }\n  }\n};\n\n/*\n * x1     :   2-dim array\n * x2     :   2-dim array\n * x3     :   2-dim array\n * shader :   is a function that receives a 2-dim array and a triangle (array with 3 points) and returns a rgba 4-dim array\n */\nCanvas.prototype.drawTriangle = function (x1, x2, x3, shader) {\n  var array = [x1, x2, x3];\n  this.drawPolygon(array, shader, Canvas.isInsideConvex);\n};\n\n/* x1     :   2-dim array\n * x2     :   2-dim array\n * x3     :   2-dim array\n * x4     :   2-dim array\n * shader :   is a function that receives a 2-dim array and returns a rgba 4-dim array\n */\nCanvas.prototype.drawQuad = function (x1, x2, x3, x4, shader) {\n  this.drawPolygon([x1, x2, x3, x4], shader);\n};\n\nCanvas.prototype.drawImage = function (img, x) {\n  if (\"isReady\" in img && !img.isReady) return;\n  this.useCanvasCtx((canvas) => canvas.ctx.drawImage(img, x[1], x[0]));\n};\n\nCanvas.prototype.drawCircle = function (x, r, shader) {\n  var corner = scale([1, 1], r);\n  var upperBox = [diff(x, corner), add(x, corner)];\n  var size = this.getSize();\n  upperBox[0] = floor(min(diff(size, [1, 1]), max([0, 0], upperBox[0])));\n  upperBox[1] = floor(min(diff(size, [1, 1]), max([0, 0], upperBox[1])));\n  for (var i = upperBox[0][0]; i <= upperBox[1][0]; i++) {\n    for (var j = upperBox[0][1]; j <= upperBox[1][1]; j++) {\n      var p = [i, j];\n      if (this.isInsideCircle(p, x, r)) {\n        shader(p, [x, r], this);\n      }\n    }\n  }\n};\n\nCanvas.prototype.isInsideCircle = function (p, x, r) {\n  return squareNorm(diff(p, x)) <= r * r;\n};\n\nCanvas.prototype.addEventListener = function (key, lambda, useCapture) {\n  this.canvas.addEventListener(key, lambda, useCapture);\n};\n\nCanvas.prototype.drawString = function (x, string, contextShader) {\n  this.useCanvasCtx((canvas) => {\n    contextShader(canvas.ctx);\n    canvas.ctx.fillText(string, x[1], x[0]);\n  });\n};\n\n// Static functions\n\n// slower than isInsideConvex method\nCanvas.isInsidePolygon = function (x, array) {\n  var v = [];\n  var theta = 0;\n  var n = array.length;\n  for (var i = 0; i < n; i++) {\n    v[0] = diff(array[(i + 1) % n], x);\n    v[1] = diff(array[i], x);\n    theta += Math.acos(dot(v[0], v[1]) / (norm(v[0]) * norm(v[1])));\n  }\n  return Math.abs(theta - 2 * Math.PI) < 1e-3;\n};\n\nCanvas.isInsideConvex = function (x, array) {\n  var m = array.length;\n  var v = [];\n  var vDotN = [];\n  for (var i = 0; i < m; i++) {\n    v[i] = diff(array[(i + 1) % m], array[i]);\n    let n = [-v[i][1], v[i][0]];\n    let r = diff(x, array[i]);\n    vDotN[i] = dot(r, n);\n  }\n  let orientation = v[0][0] * v[1][1] - v[0][1] * v[1][0] > 0 ? 1 : -1;\n  for (var i = 0; i < m; i++) {\n    var myDot = vDotN[i] * orientation;\n    if (myDot < 0) return false;\n  }\n  return true;\n};\n\nCanvas.simpleShader = function (color) {\n  return (x, element, canvas) => canvas.drawPxl(x, color);\n};\n\nCanvas.colorShader = function (colors) {\n  var auxShader = (x, poly, canvas, alpha) => {\n    var interpolateColors = [0, 0, 0, 0];\n    for (var i = 0; i < poly.length; i++) {\n      interpolateColors[0] = interpolateColors[0] + colors[i][0] * alpha[i];\n      interpolateColors[1] = interpolateColors[1] + colors[i][1] * alpha[i];\n      interpolateColors[2] = interpolateColors[2] + colors[i][2] * alpha[i];\n      interpolateColors[3] = interpolateColors[3] + colors[i][3] * alpha[i];\n    }\n    canvas.drawPxl(x, interpolateColors);\n  };\n  return Canvas.interpolateTriangleShader(auxShader);\n};\n\nCanvas.interpolateQuadShader = function (shader) {\n  return function (x, quad, canvas) {\n    var t1 = [quad[0], quad[1], quad[2]];\n    var t2 = [quad[2], quad[3], quad[0]];\n    var alpha = Canvas.triangleBaryCoord(x, t1);\n    if (\n      alpha[0] > 0 &&\n      alpha[1] > 0 &&\n      alpha[2] > 0 &&\n      Math.abs(alpha[0] + alpha[1] + alpha[2] - 1) < 1e-10\n    ) {\n      shader(x, quad, canvas, [alpha[0], alpha[1], alpha[2], 0]);\n    } else {\n      alpha = Canvas.triangleBaryCoord(x, t2);\n      shader(x, quad, canvas, [alpha[2], 0, alpha[0], alpha[1]]);\n    }\n  };\n};\n\nCanvas.interpolateTriangleShader = function (shader) {\n  return (x, triangle, canvas) => {\n    const alpha = Canvas.triangleBaryCoord(x, triangle);\n    shader(x, triangle, canvas, alpha);\n  };\n};\n\nCanvas.interpolateLineShader = function (shader) {\n  return (x, line, canvas) => {\n    var v = diff(line[1], line[0]);\n    var z = diff(x, line[0]);\n    var vnorm = squareNorm(v);\n    var projection = dot(z, v);\n    var t = vnorm == 0.0 ? 0 : projection / vnorm;\n    shader(x, line, canvas, t);\n  };\n};\n\n/**\n * img: html loaded image.\n * quadTexCoord: [0, 1]^{2 * 4}, texture coordinates\n */\nCanvas.quadTextureShader = function (\n  img,\n  quadTexCoord,\n  interpolation = Canvas.bilinearInterpolation\n) {\n  let imageCache = null;\n  const imageShader = (x, quad, canvas, alpha) => {\n    if (!img.isReady || imageCache == null)\n      imageCache = new Canvas(ImageIO.getImageCanvas(img));\n    const imageCanvas = imageCache;\n    const imgSize = imageCanvas.getSize();\n    const interpolateTexCoord = [0, 0];\n    for (let i = 0; i < quadTexCoord.length; i++) {\n      interpolateTexCoord[0] =\n        interpolateTexCoord[0] + quadTexCoord[i][0] * alpha[i];\n      interpolateTexCoord[1] =\n        interpolateTexCoord[1] + quadTexCoord[i][1] * alpha[i];\n    }\n    var i = [\n      (1 - interpolateTexCoord[1]) * (imgSize[1] - 1),\n      (imgSize[0] - 1) * interpolateTexCoord[0],\n    ];\n    // bound coordinates\n    i = max([0, 0], min(diff([imgSize[0], imgSize[1]], [1, 1]), i));\n    // pxl lower corner\n    var j = floor(i);\n    var cornerColors = [\n      imageCanvas.getPxl(j),\n      imageCanvas.getPxl(add(j, [1, 0])),\n      imageCanvas.getPxl(add(j, [1, 1])),\n      imageCanvas.getPxl(add(j, [0, 1])),\n    ];\n    var finalColor = interpolation(cornerColors, diff(i, j));\n    canvas.drawPxl(x, finalColor);\n  };\n  return Canvas.interpolateQuadShader(imageShader);\n};\n\nCanvas.triangleCache = (() => {\n  const hashMap = [];\n  const size = 3;\n  return {\n    constains: (triangleHash) => hashMap[triangleHash % size] != undefined,\n    get: (triangleHash) => hashMap[triangleHash % size],\n    set: (triangleHash, value) => (hashMap[triangleHash % size] = value),\n  };\n})(); //{triangle: null, u: [], v:[], det:null, hash:null}\n\nCanvas.triangleHash = (triangle) => {\n  const array = [\n    triangle[0][0],\n    triangle[1][0],\n    triangle[2][0],\n    triangle[0][1],\n    triangle[1][1],\n    triangle[2][1],\n  ];\n  return array.reduce((h, x) => 31 * h + x, 1);\n};\n\nCanvas.triangleBaryCoord = function (x, triangle) {\n  const hash = Canvas.triangleHash(triangle);\n  const y = [x[0] - triangle[0][0], x[1] - triangle[0][1]];\n  if (!Canvas.triangleCache.constains(hash)) {\n    const u = [\n      triangle[1][0] - triangle[0][0],\n      triangle[1][1] - triangle[0][1],\n    ];\n    const v = [\n      triangle[2][0] - triangle[0][0],\n      triangle[2][1] - triangle[0][1],\n    ];\n    const det = u[0] * v[1] - u[1] * v[0];\n    Canvas.triangleCache.set(hash, {\n      triangle: triangle,\n      u: u.map((x) => x / det),\n      v: v.map((x) => x / det),\n      det: det,\n      hash: hash,\n    });\n  }\n  const cache = Canvas.triangleCache.get(hash);\n  const u = cache.u;\n  const v = cache.v;\n  const det = cache.det;\n  if (det == 0) return [0, 0, 0];\n  var alpha = [v[1] * y[0] - v[0] * y[1], u[0] * y[1] - u[1] * y[0]];\n  return [1 - alpha[0] - alpha[1], alpha[0], alpha[1]];\n};\n\n/**\n * values \\in R^{k * 4}\n * x \\in [0,1]^2\n */\nCanvas.bilinearInterpolation = function (values, x) {\n  var acc = [];\n  for (var k = 0; k < values.length; k++) {\n    var f03 = values[0][k] + (values[3][k] - values[0][k]) * x[1];\n    var f12 = values[1][k] + (values[2][k] - values[1][k]) * x[1];\n    var f = f03 + (f12 - f03) * x[0];\n    acc.push(f);\n  }\n  return acc;\n};\n/**\n * size: is an array with width and height of a HTML5 Canvas.\n * domId: DOM element where the canvas will be added\n *\n * returns Canvas object from the generated html canvas.\n */\nCanvas.createCanvas = function (size, domId) {\n  const canvas = document.createElement(\"canvas\");\n  canvas.setAttribute(\"width\", size[0]);\n  canvas.setAttribute(\"height\", size[1]);\n  document.getElementById(domId).appendChild(canvas);\n  return canvas;\n};\n\nexport default Canvas;\n","import Canvas from \"./Canvas\";\n\n//Note that we can switch from heritage to composition, think about that\n\n// cameraSpace : 2-dim array with two 2-dim arrays that are intervals [a,b] | a < b\nvar Canvas2D = function (canvas, cameraSpace) {\n  Canvas.call(this, canvas);\n  if (\n    cameraSpace.length != 2 ||\n    (cameraSpace[0].length != 2 && cameraSpace[1].length != 2)\n  ) {\n    throw \"camera space must be 2-dim array with 2-dim arrays representing an interval\";\n  }\n  this.cameraSpace = cameraSpace;\n};\n\nCanvas2D.prototype = Object.create(Canvas.prototype);\nCanvas2D.prototype.constructor = Canvas2D;\n\n/* x : 2-dim array in camera space coordinates\n * returns : 2-dim array in integer coordinates\n */\nCanvas2D.prototype.integerTransform = function (x) {\n  var xint =\n    (-(this.canvas.height - 1) /\n      (this.cameraSpace[1][1] - this.cameraSpace[1][0])) *\n    (x[1] - this.cameraSpace[1][1]);\n  var yint =\n    ((this.canvas.width - 1) /\n      (this.cameraSpace[0][1] - this.cameraSpace[0][0])) *\n    (x[0] - this.cameraSpace[0][0]);\n  return [xint, yint];\n};\n\n/* x : 2-dim array in integer coordinates\n * returns : 2-dim array in camera space coordinates\n */\nCanvas2D.prototype.inverseTransform = function (x) {\n  var xt =\n    this.cameraSpace[0][0] +\n    ((this.cameraSpace[0][1] - this.cameraSpace[0][0]) /\n      (this.canvas.width - 1)) *\n      x[1];\n  var yt =\n    this.cameraSpace[1][1] -\n    ((this.cameraSpace[1][1] - this.cameraSpace[1][0]) /\n      (this.canvas.height - 1)) *\n      x[0];\n  return [xt, yt];\n};\n\n/* x1     :   2-dim array\n * x2     :   2-dim array\n * shader :   is a function that receives a 2-dim array and returns a rgba 4-dim array\n */\nCanvas2D.prototype.drawLine = function (x1, x2, shader) {\n  const y1 = this.integerTransform(x1);\n  const y2 = this.integerTransform(x2);\n  Canvas.prototype.drawLine.call(this, y1, y2, shader);\n};\n\n/* x1     :   2-dim array\n * x2     :   2-dim array\n * x3     :   2-dim array\n * shader :   is a function that receives a 2-dim array and returns a rgba 4-dim array\n */\nCanvas2D.prototype.drawTriangle = function (x1, x2, x3, shader) {\n  const y1 = this.integerTransform(x1);\n  const y2 = this.integerTransform(x2);\n  const y3 = this.integerTransform(x3);\n  Canvas.prototype.drawTriangle.call(this, y1, y2, y3, shader);\n};\n\n/* x1     :   2-dim array\n * x2     :   2-dim array\n * x3     :   2-dim array\n * x4     :   2-dim array\n * shader :   is a function that receives a 2-dim array and returns a rgba 4-dim array\n */\nCanvas2D.prototype.drawQuad = function (x1, x2, x3, x4, shader) {\n  const y1 = this.integerTransform(x1);\n  const y2 = this.integerTransform(x2);\n  const y3 = this.integerTransform(x3);\n  const y4 = this.integerTransform(x4);\n  Canvas.prototype.drawQuad.call(this, y1, y2, y3, y4, shader);\n};\n\nCanvas2D.prototype.drawCircle = function (x, r, shader) {\n  // it assumes squared canvas, for now ...\n  const y = this.integerTransform(x);\n  const z = this.integerTransform([r, 0])[1] - this.integerTransform([0, 0])[1];\n  Canvas.prototype.drawCircle.call(this, y, z, shader);\n};\n\nCanvas2D.prototype.drawImage = function (img, x) {\n  Canvas.prototype.drawImage.call(this, img, this.integerTransform(x));\n};\n\nCanvas2D.prototype.drawString = function (x, string, contextShader) {\n  const y = this.integerTransform(x);\n  Canvas.prototype.drawString.call(this, y, string, contextShader);\n};\n\n// camera : 2-dim array with two 2-dim arrays that are intervals [a,b] | a < b\nCanvas2D.prototype.setCamera = function (camera) {\n  if (camera.length != 2 || (camera[0].length != 2 && camera[1].length != 2)) {\n    throw \"camera space must be 2-dim array with 2-dim arrays representing an interval\";\n  }\n  this.cameraSpace = camera;\n};\n\nexport default Canvas2D;\n","const ImageIO = {\n  // empty object\n};\n\n/**\n * img : html image\n */\nImageIO.getImageCanvas = img => {\n  const canvasAux = document.createElement(\"canvas\");\n  canvasAux.width = img.width;\n  canvasAux.height = img.height;\n  const contextAux = canvasAux.getContext(\"2d\");\n  contextAux.fillStyle = \"rgba(0, 0, 0, 0)\";\n  contextAux.globalCompositeOperation = \"source-over\";\n  contextAux.fillRect(0, 0, canvasAux.width, canvasAux.height);\n  contextAux.drawImage(img, 0, 0);\n  return canvasAux;\n};\n\n/**\n * img : html image\n */\nImageIO.getDataFromImage = img => {\n  canvas = ImageIO.getImageCanvas(img);\n  return canvas.getContext(\"2d\").getImageData(0, 0, img.width, img.height);\n};\n\nImageIO.loadImage = src => {\n  const img = new Image();\n  img.src = src;\n  img.isReady = false;\n  img.onload = () => (img.isReady = true);\n  return img;\n};\n\nImageIO.generateImageReadyPredicate = img => () => img.isReady;\n\nexport default ImageIO;\n","export default class Color {\n  /**\n   *\n   * @param {*} rgba: Uint8Array\n   */\n  constructor(rgba) {\n    this.rgba = rgba;\n  }\n\n  getRGBA() {\n    return this.rgba;\n  }\n\n  static ofRGBA(red = 0, green = 0, blue = 0, alpha = 255) {\n    const rgba = new Uint8Array(4);\n    rgba[0] = red;\n    rgba[1] = green;\n    rgba[2] = blue;\n    rgba[3] = alpha;\n    return new Color(rgba);\n  }\n\n  static random() {\n    const r = () => Math.random() * 256;\n    return Color.ofRGBA(r(), r(), r(), r());\n  }\n\n  get red() {\n    return this.rgba[0];\n  }\n\n  get green() {\n    return this.rgba[1];\n  }\n\n  get blue() {\n    return this.rgba[2];\n  }\n\n  get alpha() {\n    return this.rgba[3];\n  }\n}\n","//========================================================================================\n/*                                                                                      *\n *                              MATRIX UTILS (order counts)                             *\n *                                                                                      */\n//========================================================================================\n\nconst getIndexFromCoord = (_, m) => (i, j) => j + i * m;\nconst getCoordFromIndex = (_, m) => (k) => [k / m, k % m].map(Math.floor);\nconst index2Key = (i, j) => `${i},${j}`;\nconst key2Index = (k) => k.split(\",\").map(Number);\n\nclass MatrixBuilder {\n  constructor() {\n    this._size = [];\n    this.data = {};\n  }\n\n  size(n, m = 1) {\n    this._size = [n, m];\n    return this;\n  }\n\n  set(i, j, v) {\n    if (this._size.length === 0)\n      throw new MatrixError(\"Setting value to empty matrix\");\n    this.data[index2Key(i, j)] = v;\n    return this;\n  }\n\n  build() {\n    const [n, m] = this._size;\n    const data = new Float64Array(n * m);\n    const indexer = getIndexFromCoord(n, m);\n    Object.keys(this.data).forEach((key) => {\n      data[indexer(...key2Index(key))] = this.data[key];\n    });\n    return new Matrix(data, this._size);\n  }\n}\n\nclass RowBuilder {\n  constructor() {\n    this.rows = [];\n    this.dim = 0;\n  }\n\n  addRow(...array) {\n    if (this.dim === 0) {\n      this.dim = array.length;\n    }\n    if (this.dim !== array.length)\n      throw new MatrixError(\n        `Added row of different dimension, actual dim is ${this.dim}`\n      );\n    this.rows.push(array);\n    return this;\n  }\n\n  build() {\n    if (this.rows.length > 0) return this.#buildWithRows();\n    throw new MatrixError(\"Building empty matrix\");\n  }\n\n  #buildWithRows() {\n    const rows = this.rows.length;\n    const cols = this.dim;\n    const data = new Float64Array(rows * cols);\n    const indexF = getIndexFromCoord(rows, cols);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < cols; j++) {\n        data[indexF(i, j)] = this.rows[i][j];\n      }\n    }\n    return new Matrix(data, [rows, cols]);\n  }\n}\n\nclass ColBuilder {\n  constructor() {\n    this.cols = [];\n    this.dim = 0;\n  }\n\n  addCol(...array) {\n    if (this.dim === 0) {\n      this.dim = array.length;\n    }\n    if (this.dim !== array.length)\n      throw new MatrixError(\n        `Added col of different dimension, actual dim is ${this.dim}`\n      );\n    this.cols.push(array);\n    return this;\n  }\n\n  build() {\n    if (this.cols.length > 0) return this.#buildWithCols();\n    throw new MatrixError(\"Building empty matrix\");\n  }\n\n  #buildWithCols() {\n    const rows = this.dim;\n    const cols = this.cols.length;\n    const data = new Float64Array(rows * cols);\n    const indexF = getIndexFromCoord(rows, cols);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < cols; j++) {\n        data[indexF(i, j)] = this.cols[j][i];\n      }\n    }\n    return new Matrix(data, [rows, cols]);\n  }\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        MATRIX                                        *\n *                                                                                      */\n//========================================================================================\n\nexport default class Matrix {\n  /**\n   *\n   * @param {*} data: Float64Array; Matrix data in major row format\n   * @param {*} shape: 2-array [rows,columns]\n   */\n  constructor(data, shape) {\n    this.data = data;\n    this.shape = shape;\n  }\n\n  get rows() {\n    return this.shape[0];\n  }\n\n  get cols() {\n    return this.shape[1];\n  }\n\n  get(i = 0, j = 0) {\n    const [_, cols] = this.shape;\n    return this.data[j + i * cols];\n  }\n\n  prod(matrix) {\n    if (this.cols !== matrix.rows) {\n      throw new MatrixError(\n        `Incompatible product size. Left ${this.shape}, right ${matrix.shape}`\n      );\n    }\n    const n = this.rows;\n    const m = this.cols;\n    const l = matrix.cols;\n    const prod = new Float64Array(n * l);\n    const indexer = getIndexFromCoord(n, l);\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j < l; j++) {\n        let acc = 0;\n        for (let k = 0; k < m; k++) {\n          acc += this.get(i, k) * matrix.get(k, j);\n        }\n        prod[indexer(i, j)] = acc;\n      }\n    }\n\n    return new Matrix(prod, [n, l]);\n  }\n\n  dot(matrix) {\n    if (this.rows !== matrix.rows)\n      throw new MatrixError(\n        `Incompatible product size. Left ${this.shape}, right ${matrix.shape}`\n      );\n    const n = this.rows;\n    const m = this.cols;\n    const l = matrix.cols;\n    const prod = new Float64Array(m * l);\n    const indexer = getIndexFromCoord(m, l);\n    for (let i = 0; i < m; i++) {\n      for (let j = 0; j < l; j++) {\n        let acc = 0;\n        for (let k = 0; k < n; k++) {\n          acc += this.get(k, i) * matrix.get(k, j);\n        }\n        prod[indexer(i, j)] = acc;\n      }\n    }\n\n    return new Matrix(prod, [m, l]);\n  }\n\n  /**\n   *\n   * @param {*} lambda: (number, i, j) => number\n   * @returns Matrix\n   */\n  map(lambda = (x) => x) {\n    const getCoord = getCoordFromIndex(...this.shape);\n    return new Matrix(\n      this.data.map((x, k) => {\n        const [i, j] = getCoord(k);\n        return lambda(x, i, j);\n      }),\n      this.shape\n    );\n  }\n\n  /**\n   *\n   * @param {*} lambda (accumulator, number, i, j) => number\n   * @param {*} identity\n   */\n  reduce(lambda, identity = 0) {\n    const getCoord = getCoordFromIndex(...this.shape);\n    return this.data.reduce((e, x, k) => {\n      const [i, j] = getCoord(k);\n      return lambda(e, x, i, j);\n    }, identity);\n  }\n\n  fold = this.reduce;\n\n  /**\n   *\n   * @param {*} binaryLambda: (number,number) => number\n   */\n  op(matrix, binaryLambda) {\n    const [rows, cols] = this.shape;\n    const [mRows, mCols] = matrix.shape;\n    if (rows !== mRows || cols !== mCols)\n      throw new MatrixError(\"Matrix must be of same size\");\n    return new Matrix(\n      this.data.map((x, i) => binaryLambda(x, matrix.data[i])),\n      this.shape\n    );\n  }\n\n  add(matrix) {\n    return this.op(matrix, (a, b) => a + b);\n  }\n\n  sub(matrix) {\n    return this.op(matrix, (a, b) => a - b);\n  }\n\n  mul(matrix) {\n    return this.op(matrix, (a, b) => a * b);\n  }\n\n  div(matrix) {\n    return this.op(matrix, (a, b) => a / b);\n  }\n\n  scale(real) {\n    return this.map((x) => x * real);\n  }\n\n  norm() {\n    let acc = 0;\n    for (let i = 0; i < this.data.length; i++) {\n      acc += this.data[i] * this.data[i];\n    }\n    return Math.sqrt(acc);\n  }\n\n  length = this.norm;\n\n  equals(matrix, precision = 1e-6) {\n    if (!(matrix instanceof Matrix)) return false;\n    try {\n      return this.sub(matrix).length() < precision;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  toArray() {\n    return this.data;\n  }\n\n  static id = (n, m = n) => {\n    const en = Matrix.e(n);\n    let matrixBuilder = Matrix.colBuilder();\n    for (let i = 0; i < m; i++) {\n      matrixBuilder = matrixBuilder.addCol(...en(i).data);\n    }\n    return matrixBuilder.build();\n  };\n\n  static e = (n) => (i) => {\n    return new Matrix(\n      new Float64Array(n).map((_, j) => (i === j ? 1 : 0)),\n      [n, 1]\n    );\n  };\n\n  static dx = (n) => (i) => {\n    return new Matrix(\n      new Float64Array(n).map((_, j) => (i === j ? 1 : 0)),\n      [1, n]\n    );\n  };\n\n  static ZERO(n, m = 1) {\n    return Matrix.builder().size(n, m).build();\n  }\n\n  static builder() {\n    return new MatrixBuilder();\n  }\n\n  static rowBuilder() {\n    return new RowBuilder();\n  }\n\n  static colBuilder() {\n    return new ColBuilder();\n  }\n\n  static vec(...array) {\n    return new ColBuilder().addCol(...array).build();\n  }\n\n  static cov(...array) {\n    return new RowBuilder().addRow(...array).build();\n  }\n\n  static vec2 = {\n    of: (x = 0, y = 0) => Matrix.vec(x, y),\n    e0: Matrix.vec(1, 0),\n    e1: Matrix.vec(0, 1),\n    ZERO: Matrix.ZERO(2, 1),\n  };\n\n  static vec3 = {\n    of: (x = 0, y = 0, z = 0) => Matrix.vec(x, y, z),\n    e0: Matrix.vec(1, 0, 0),\n    e1: Matrix.vec(0, 1, 0),\n    e2: Matrix.vec(0, 0, 1),\n    ZERO: Matrix.ZERO(3, 1),\n  };\n}\n\nexport class MatrixError extends Error {}\n","export const perf = (lambda) => {\n  const t = performance.now();\n  lambda();\n  return performance.now() - t;\n};\n\n/**\n * Unit test maker\n * @param {*} title\n * @param {*} lambda: (width:number, height: number) => {}\n */\nexport function test(title, lambda = () => {}) {\n  let canvas;\n  const canvasFactory = (width, height) => {\n    canvas = Canvas.builder().width(width).height(height).build();\n    return canvas;\n  };\n  const timeInMillis = perf(() => lambda(canvasFactory));\n  const domTest = document.createElement(\"div\");\n  const testTitle = document.createElement(\"h3\");\n  testTitle.innerText = title;\n  domTest.appendChild(testTitle);\n  domTest.appendChild(canvas.getDom());\n  const timeDom = document.createElement(\"h4\");\n  timeDom.innerText = `Test took ${timeInMillis}ms`;\n  domTest.appendChild(timeDom);\n  document.body.appendChild(domTest);\n}\n","import Canvas_old from \"./Canvas_old/main/Canvas\";\nimport Canvas2D_old from \"./Canvas_old/main/Canvas2D\";\nimport ImageIO from \"./Canvas_old/main/ImageIO\";\nimport Canvas from \"./Canvas/main/Canvas\";\nimport Color from \"./Color/main/Color\";\nimport * as Utils from \"./Utils/main/Utils\";\nimport Animator from \"./Animator/main/Animator\";\nimport Matrix from \"./Matrix/main/Matrix\";\nexport {\n  Canvas_old,\n  Canvas2D_old,\n  ImageIO,\n  Canvas,\n  Color,\n  Utils,\n  Animator,\n  Matrix,\n};\n","module.exports = require(\"@babel/runtime/helpers/esm/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/esm/createClass\");","module.exports = require(\"@babel/runtime/helpers/esm/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/esm/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/esm/inherits\");","module.exports = require(\"@babel/runtime/helpers/esm/possibleConstructorReturn\");","module.exports = require(\"@babel/runtime/helpers/esm/slicedToArray\");","module.exports = require(\"@babel/runtime/helpers/esm/toConsumableArray\");","module.exports = require(\"@babel/runtime/helpers/esm/wrapNativeSuper\");"],"sourceRoot":""}