<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Canvas Test</title>
    <script src="../../../dist/index.js"></script>
  </head>
  <body></body>
  <script>
    const { Utils, Canvas, Color } = Tela;
    const { perf } = Utils;
    /**
     * Unit test maker
     * @param {*} title
     * @param {*} lambda: (width:number, height: number) => {}
     */
    function test(title, lambda = () => {}) {
      let canvas;
      const canvasFactory = (width, height) => {
        canvas = Canvas.builder().width(width).height(height).build();
        return canvas;
      };
      const timeInMillis = perf(() => lambda(canvasFactory));
      const domTest = document.createElement("div");
      const testTitle = document.createElement("h3");
      testTitle.innerText = title;
      domTest.appendChild(testTitle);
      domTest.appendChild(canvas.getDom());
      const timeDom = document.createElement("h4");
      timeDom.innerText = `Test took ${timeInMillis}ms`;
      domTest.appendChild(timeDom);
      document.body.appendChild(domTest);
    }

    test("Test fill", (canvasFactory) => {
      const canvas = canvasFactory(400, 300);
      canvas.fill(Color.ofRGBA(0, 0, 0));
      canvas.fill(Color.ofRGBA(255, 0, 0, 100));
    });

    test("Test map", (canvasFactory) => {
      const canvas = canvasFactory(400, 300);
      canvas.map(() => Color.random()).paint();
    });

    test("Test map with coordinates", (canvasFactory) => {
      const canvas = canvasFactory(400, 300);
      canvas
        .map((c, x, y) => Color.ofRGBA((x / 300) * 256, (y / 400) * 256, 0))
        .paint();
    });
  </script>
</html>
