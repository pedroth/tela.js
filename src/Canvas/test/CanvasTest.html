<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Canvas Test</title>
    <script src="../../../dist/index.js"></script>
  </head>
  <body></body>
  <script>
    const { Utils, Canvas, Color, Matrix } = Tela;
    const { perf, test } = Utils;
    const { vec2 } = Matrix;

    test("Test fill", (canvasFactory) => {
      const canvas = canvasFactory(400, 300);
      canvas.fill(Color.ofRGBA(0, 0, 255));
      canvas.fill(Color.ofRGBA(255, 0, 0, 100));
    });

    test("Test map", (canvasFactory) => {
      const canvas = canvasFactory(400, 300);
      canvas.map(() => Color.random()).paint();
    });

    test("Test map with coordinates", (canvasFactory) => {
      const width = 400;
      const height = 300;
      const canvas = canvasFactory(width, height);
      canvas
        .map((c, x, y) =>
          Color.ofRGBA((x / (height - 1)) * 255, (y / (width - 1)) * 255, 0)
        )
        .paint();
    });

    test("Test get and set pxl", (canvasFactory) => {
      const width = 400;
      const height = 300;
      const canvas = canvasFactory(width, height);
      canvas
        .fill(Color.ofRGBA(0, 0, 0))
        .setPxl(100, 300, Color.ofRGBA(255, 0, 0))
        .setPxl(101, 300, Color.ofRGBA(255, 0, 0))
        .setPxl(99, 300, Color.ofRGBA(255, 0, 0))
        .setPxl(100, 301, Color.ofRGBA(255, 0, 0))
        .setPxl(100, 299, Color.ofRGBA(255, 0, 0))
        .paint();
      const color = canvas.getPxl(100, 300);
      canvas.setPxl(200, 300, color).paint();
      canvas.setPxl(199, 300, color).paint();
      canvas.setPxl(201, 300, color).paint();
      canvas.setPxl(200, 301, color).paint();
      canvas.setPxl(200, 299, color).paint();
      canvas.setPxl(-100, 600).paint();
    });

    // test("Test draw line", () => {
    //   const width = 400;
    //   const height = 300;
    //   const canvas = canvasFactory(width, height);
    //   const red = (i, j) => Color.ofRGBA(255, 0, 0);
    //   canvas.drawLine(vec2.of(0, 0), vec2.of(height - 1, width - 1), red);
    //   canvas.drawLine(vec2.of(-10, 100), vec2.of(100, 500), red);
    // });

    // test("Test draw triangle", () => {
    //   const width = 400;
    //   const height = 300;
    //   const canvas = canvasFactory(width, height);
    //   const red = (i, j) => Color.ofRGBA(255, 0, 0);
    //   const green = (i, j) => Color.ofRGBA(0, 255, 0);
    //   const blue = (i, j) => Color.ofRGBA(0, 0, 255);
    //   canvas.drawTriangle(
    //     vec2.of(0, 0),
    //     vec2.of(height - 1, 0),
    //     vec2.of(height - 1, width - 1),
    //     red
    //   );
    //   canvas.drawTriangle(
    //     vec2.of(height - 1, width - 1),
    //     vec2.of(0, width - 1),
    //     vec2.of(0, 0),
    //     green
    //   );
    //   canvas.drawTriangle(
    //     vec2.of(height - 1, width - 1),
    //     vec2.of(0, width - 1),
    //     vec2.of(0, 0),
    //     green
    //   );
    // });
  </script>
</html>
